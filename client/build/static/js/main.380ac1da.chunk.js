(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a,c,s,r,o,i,l,d,j,b=n(1),m=n.n(b),u=n(68),h=n.n(u),O=n(32),x=n(72),f=n(97),p=n(98),g=n(95),v=n(19),y=n(6),w=n(71),N=n(100),k=n(26),S=n(96),$=Object(S.a)(a||(a=Object(k.a)(["\n  query  {\n  bodys {\n    _id\n    plan\n    foods {\n      _id\n      name\n      category\n      image\n      calories\n      fats\n      carbs\n      protein\n      isLowCalorie\n    }\n  }\n}\n"]))),C=Object(S.a)(c||(c=Object(k.a)(["\n  query GetSingleBody($bodyId: ID!) {\n    body(bodyId: $bodyId) {\n      _id\n      plan\n      foods {\n        _id\n        name\n        category\n        image\n        calories\n        fats\n        carbs\n        protein\n      }\n    }\n  }\n"]))),I=(Object(S.a)(s||(s=Object(k.a)(["\nquery  {\n  foods {\n    _id\n    name\n    category\n    image\n    calories\n    fats\n    carbs\n    protein\n    isLowCalorie\n  }\n}\n"]))),Object(S.a)(r||(r=Object(k.a)(["\n  query GetFoodById($foodId: ID!) {\n    food(_id: $foodId) {\n      _id\n      name\n      category\n      image\n      calories\n      fats\n      carbs\n      protein\n      isLowCalorie\n    }\n  }\n"]))),Object(S.a)(o||(o=Object(k.a)(["\n  query GetUser {\n    user {\n      _id\n      firstName\n      lastName\n      email\n    }\n  }\n"]))),n(2)),_=function(e){var t=e.bodys,n=e.title;return t.length?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{children:n}),t&&t.map((function(e){return Object(I.jsxs)("div",{className:"card mb-3",children:[Object(I.jsx)("img",{src:"https://images.unsplash.com/photo-1517836357463-d25dfeac3438?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OXx8Zml0bmVzc3xlbnwwfHwwfHx8MA%3D%3D&w=1000&q=80/photo-1517836357463-d25dfeac3438?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OXx8Zml0bmVzc3xlbnwwfHwwfHx8MA%3D%3D&w=1000&q=80",alt:e.plan}),Object(I.jsxs)(v.b,{className:"btn btn-primary btn-block btn-squared",to:"/bodies/".concat(e._id),children:["Join the discussion on ",e.plan,"."]})]},e._id)}))]}):Object(I.jsx)("h3",{children:"No bodys Yet"})},F=function(){var e=Object(N.a)($),t=e.loading,n=e.data,a=(null===n||void 0===n?void 0:n.bodys)||[];return Object(I.jsx)("main",{children:Object(I.jsx)("div",{className:"col-12 col-md-8 mb-3",children:t?Object(I.jsx)("div",{children:"Loading..."}):Object(I.jsx)(_,{bodys:a,title:"Some seed for Body(s)..."})})})},A=n(13),L=n(8),D=n(14),T=n(9),H=n(91),M=Object(S.a)(i||(i=Object(k.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),B=Object(S.a)(l||(l=Object(k.a)(["\nmutation AddUser($firstName: String!, $lastName: String!, $email: String!, $password: String!) {\n  addUser(firstName: $firstName, lastName: $lastName, email: $email, password: $password) {\n    token\n    user {\n      _id\n      firstName\n      lastName\n      email\n    }\n  }\n}\n"]))),W=(Object(S.a)(d||(d=Object(k.a)(["\nmutation RemoveFood($_id: ID!) {\n  removeFood(_id: $_id) {\n    _id\n    name\n    category\n    image\n    calories\n    fats\n    carbs\n    protein\n    isLowCalorie\n  }\n}"]))),Object(S.a)(j||(j=Object(k.a)(["\nmutation Mutation($bodyId: ID!, $name: String!, $category: String!, $calories: String!, $fats: String!, $carbs: String!, $protein: String!) {\n  addFood(bodyId: $bodyId, name: $name, category: $category, calories: $calories, fats: $fats, carbs: $carbs, protein: $protein) {\n    _id\n    plan\n    foods {\n    name\n    category\n    calories\n    fats\n    carbs\n    protein\n      }\n  }\n}\n"])))),q=n(18),E=n(17),U=n(61),z=n.n(U),G=new(function(){function e(){Object(q.a)(this,e)}return Object(E.a)(e,[{key:"getProfile",value:function(){return z()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return z()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}());var P=function(e){var t=Object(b.useState)({email:"",password:""}),n=Object(T.a)(t,2),a=n[0],c=n[1],s=Object(H.a)(M),r=Object(T.a)(s,2),o=r[0],i=r[1].error,l=function(){var e=Object(D.a)(Object(L.a)().mark((function e(t){var n,c;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,o({variables:{email:a.email,password:a.password}});case 4:n=e.sent,c=n.data.login.token,G.login(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e){var t=e.target,n=t.name,s=t.value;c(Object(O.a)(Object(O.a)({},a),{},Object(A.a)({},n,s)))};return Object(I.jsxs)("div",{className:"container my-1",children:[Object(I.jsx)(v.b,{to:"/signup",children:"\u2190 Go to Signup"}),Object(I.jsx)("h2",{children:"Login"}),Object(I.jsxs)("form",{onSubmit:l,children:[Object(I.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(I.jsx)("label",{htmlFor:"email",children:"Email address:"}),Object(I.jsx)("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:d})]}),Object(I.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(I.jsx)("label",{htmlFor:"pwd",children:"Password:"}),Object(I.jsx)("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:d})]}),i?Object(I.jsx)("div",{children:Object(I.jsx)("p",{className:"error-text",children:"The provided credentials are incorrect"})}):null,Object(I.jsx)("div",{className:"flex-row flex-end",children:Object(I.jsx)("button",{type:"submit",children:"Submit"})})]})]})},R=function(e){var t=e.bodyId,n=Object(b.useState)(""),a=Object(T.a)(n,2),c=a[0],s=a[1],r=Object(b.useState)(""),o=Object(T.a)(r,2),i=o[0],l=o[1],d=Object(b.useState)(""),j=Object(T.a)(d,2),m=j[0],u=j[1],h=Object(b.useState)(""),O=Object(T.a)(h,2),x=O[0],f=O[1],p=Object(b.useState)(""),g=Object(T.a)(p,2),v=g[0],y=g[1],w=Object(b.useState)(""),N=Object(T.a)(w,2),k=N[0],S=N[1],$=Object(H.a)(W),C=Object(T.a)($,1)[0],_=function(){var e=Object(D.a)(Object(L.a)().mark((function e(n){var a;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,C({variables:{bodyId:t,categoryText:k,nameText:c,calorieText:i,fatText:m,carbText:x,proteinText:v}});case 4:a=e.sent,a.data,s(""),l(""),u(""),f(""),y(""),S(""),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsx)("h4",{children:"Add your own customized food to the plan"}),Object(I.jsxs)("form",{className:"flex-row justify-center justify-space-between-md align-center",onSubmit:_,children:[Object(I.jsx)("div",{className:"col-12 col-lg-9",children:Object(I.jsx)("textarea",{name:"foodName",placeholder:"Add your food's name...",value:c,className:"form-input w-100",style:{lineHeight:"1.5"},onChange:function(e){var t=e.target,n=t.name,a=t.value;"foodName"===n&&s(a)}})}),Object(I.jsx)("div",{className:"col-12 col-lg-9",children:Object(I.jsx)("textarea",{name:"foodCategory",placeholder:"Add your food's Category...",value:k,className:"form-input w-100",style:{lineHeight:"1.5"},onChange:function(e){var t=e.target,n=t.name,a=t.value;"foodCategory"===n&&S(a)}})}),Object(I.jsx)("div",{className:"col-12 col-lg-9",children:Object(I.jsx)("textarea",{name:"foodcalories",placeholder:"Add your food's calories...",value:i,className:"form-input w-100",style:{lineHeight:"1.5"},onChange:function(e){var t=e.target,n=t.name,a=t.value;"foodcalories"===n&&l(a)}})}),Object(I.jsx)("div",{className:"col-12 col-lg-9",children:Object(I.jsx)("textarea",{name:"foodfats",placeholder:"Add your food's fats...",value:m,className:"form-input w-100",style:{lineHeight:"1.5"},onChange:function(e){var t=e.target,n=t.name,a=t.value;"foodfats"===n&&u(a)}})}),Object(I.jsx)("div",{className:"col-12 col-lg-9",children:Object(I.jsx)("textarea",{name:"foodcarbs",placeholder:"Add your food's carbs...",value:x,className:"form-input w-100",style:{lineHeight:"1.5"},onChange:function(e){var t=e.target,n=t.name,a=t.value;"foodcarbs"===n&&f(a)}})}),Object(I.jsx)("div",{className:"col-12 col-lg-9",children:Object(I.jsx)("textarea",{name:"foodprotein",placeholder:"Add your food's protein...",value:v,className:"form-input w-100",style:{lineHeight:"1.5"},onChange:function(e){var t=e.target,n=t.name,a=t.value;"foodprotein"===n&&y(a)}})}),Object(I.jsx)("div",{className:"col-12 col-lg-3",children:Object(I.jsx)("button",{className:"btn btn-primary btn-block py-3",type:"submit",children:"Add Food"})})]})]})},Y=function(e){var t=e.foods,n=void 0===t?[]:t;return n.length?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h3",{className:"p-5 display-inline-block",style:{borderBottom:"1px dotted #1a1a1a"},children:"Foods"}),Object(I.jsx)("div",{className:"flex-row my-4",children:n&&n.map((function(e){return Object(I.jsx)("div",{className:"col-12 mb-3 pb-3",children:Object(I.jsx)("div",{className:"p-3 bg-dark text-light",children:Object(I.jsxs)("div",{className:"card-body px-1 py-1",children:[Object(I.jsx)("img",{alt:e.name,src:"/images/".concat(e.image),width:"300",height:"200"}),Object(I.jsxs)("p",{children:["Food: ",e.name]}),Object(I.jsxs)("p",{children:["Category: ",e.category]}),Object(I.jsxs)("p",{children:["Calories: ",e.calories]}),Object(I.jsxs)("p",{children:["Fats: ",e.fats]}),Object(I.jsxs)("p",{children:["Carbs: ",e.carbs]}),Object(I.jsxs)("p",{children:["Protein: ",e.protein]})]})})},e._id)}))})]}):Object(I.jsx)("h3",{children:"No foods Yet"})},Z=function(){var e=Object(y.p)().bodyId,t=Object(N.a)(C,{variables:{bodyId:e}}),n=t.loading,a=t.data,c=(null===a||void 0===a?void 0:a.body)||{};return n?Object(I.jsx)("div",{children:"Loading..."}):Object(I.jsx)("div",{children:G.loggedIn()?Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"my-5",children:Object(I.jsx)(Y,{foods:c.foods})}),Object(I.jsx)("div",{className:"m-3 p-4",style:{border:"1px dotted #1a1a1a"},children:Object(I.jsx)(R,{bodyId:c._id})})]}):Object(I.jsx)("span",{children:"(log in to check out)"})})},J=function(){var e=Object(y.l)(),t=Object(y.n)();return Object(I.jsx)("footer",{className:"w-100 mt-auto bg-secondary p-4",children:Object(I.jsxs)("div",{className:"container text-center mb-5",children:["/"!==e.pathname&&Object(I.jsx)("button",{className:"btn btn-dark mb-3",onClick:function(){return t(-1)},children:"\u2190 Go Back"}),Object(I.jsxs)("h4",{children:["Made with"," ",Object(I.jsx)("span",{className:"emoji",role:"img","aria-label":"heart","aria-hidden":"false",children:"\u2764\ufe0f"})," "]})]})})},V=function(){return Object(I.jsx)("header",{className:"bg-primary text-light mb-4 py-3 flex-row align-center",children:Object(I.jsxs)("div",{className:"container flex-row justify-space-between-lg justify-center align-center",children:[Object(I.jsx)(v.b,{className:"text-light",to:"/",children:Object(I.jsx)("h1",{className:"m-0",children:"Big Macros"})}),Object(I.jsx)("p",{className:"m-0",children:"Let's become stronger!!!"})]})})};var X=function(e){var t=Object(b.useState)({email:"",password:""}),n=Object(T.a)(t,2),a=n[0],c=n[1],s=Object(H.a)(B),r=Object(T.a)(s,1)[0],o=function(){var e=Object(D.a)(Object(L.a)().mark((function e(t){var n,c;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,r({variables:{email:a.email,password:a.password,firstName:a.firstName,lastName:a.lastName}});case 3:n=e.sent,c=n.data.addUser.token,G.login(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(e){var t=e.target,n=t.name,s=t.value;c(Object(O.a)(Object(O.a)({},a),{},Object(A.a)({},n,s)))};return Object(I.jsxs)("div",{className:"container my-1",children:[Object(I.jsx)(v.b,{to:"/login",children:"\u2190 Go to Login"}),Object(I.jsx)("h2",{children:"Signup"}),Object(I.jsxs)("form",{onSubmit:o,children:[Object(I.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(I.jsx)("label",{htmlFor:"firstName",children:"First Name:"}),Object(I.jsx)("input",{placeholder:"First",name:"firstName",type:"firstName",id:"firstName",onChange:i})]}),Object(I.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(I.jsx)("label",{htmlFor:"lastName",children:"Last Name:"}),Object(I.jsx)("input",{placeholder:"Last",name:"lastName",type:"lastName",id:"lastName",onChange:i})]}),Object(I.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(I.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(I.jsx)("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:i})]}),Object(I.jsxs)("div",{className:"flex-row space-between my-2",children:[Object(I.jsx)("label",{htmlFor:"pwd",children:"Password:"}),Object(I.jsx)("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:i})]}),Object(I.jsx)("div",{className:"flex-row flex-end",children:Object(I.jsx)("button",{type:"submit",children:"Submit"})})]})]})};var K=function(){return Object(I.jsx)("nav",{children:G.loggedIn()?Object(I.jsxs)("ul",{className:"flex-row",children:[Object(I.jsx)("li",{className:"mx-1",children:Object(I.jsx)(v.b,{to:"/",children:"Home page"})}),Object(I.jsx)("li",{className:"mx-1",children:Object(I.jsx)("a",{href:"/",onClick:function(){return G.logout()},children:"Logout"})})]}):Object(I.jsxs)("ul",{className:"flex-row",children:[Object(I.jsx)("li",{className:"mx-1",children:Object(I.jsx)(v.b,{to:"/signup",children:"Signup"})}),Object(I.jsx)("li",{className:"mx-1",children:Object(I.jsx)(v.b,{to:"/login",children:"Login"})})]})})},Q=Object(x.a)({uri:"/graphql"}),ee=Object(w.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(O.a)(Object(O.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),te=new f.a({link:ee.concat(Q),cache:new p.a});var ne=function(){return Object(I.jsx)(g.a,{client:te,children:Object(I.jsx)(v.a,{children:Object(I.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(I.jsx)(V,{}),Object(I.jsx)(K,{}),Object(I.jsx)("div",{className:"container",children:Object(I.jsxs)(y.c,{children:[Object(I.jsx)(y.a,{path:"/",element:Object(I.jsx)(F,{})}),Object(I.jsx)(y.a,{path:"/login",element:Object(I.jsx)(P,{})}),Object(I.jsx)(y.a,{path:"/signup",element:Object(I.jsx)(X,{})}),Object(I.jsx)(y.a,{path:"/bodies/:bodyId",element:Object(I.jsx)(Z,{})})]})}),Object(I.jsx)(J,{})]})})})},ae=(n(82),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}h.a.render(Object(I.jsx)(m.a.StrictMode,{children:Object(I.jsx)(ne,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ce(t,e)}))}}()}},[[83,1,2]]]);
//# sourceMappingURL=main.380ac1da.chunk.js.map